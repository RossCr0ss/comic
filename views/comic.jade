mixin makeBubble(bub)
	p(class='bubble bubble-text bubble' + (bub.stemPos ? bub.stemPos : 50),style=(bub.width ? 'width: ' + bub.width + '%;' : '') + 'top: ' + bub.top + '%; left: ' + bub.left + '%;')
		= bub.text

mixin makeImage(img)
	img(animated=img.move ? 'true' : undefined,speed=img.speed ? img.speed : undefined,travel=img.travel ? img.travel : undefined,direction=img.direction ? img.direction : undefined,style='top: ' + img.top + '%; left: ' + img.left + '%;'+(img.width ? ' width: ' + img.width + '%;' : ''),src='/images/'+img.src,alt='frog')

div#sizer
	if title
		p.cTitle= title
	- for (var c in cells)
		div.box(style=cells[c].background ? 'background-color: ' + cells[c].background : undefined)
			if cells[c].bubble
				+makeBubble(cells[c].bubble)
			if cells[c].bubbles
				- for (var b in cells[c].bubbles)
					+makeBubble(cells[c].bubbles[b]
			- for (var i in cells[c].imgs)
				+makeImage(cells[c].imgs[i])
	div#info(comicId=id,class='info')
		div
			if prevDate
				p.lnav!= '<a onclick="replaceComic(\'' + prevDate + '\');"><i class="fa fa-arrow-circle-left"></i> Previous</a>'
			if nextDate
				p.rnav!= '<a onclick="replaceComic(\'' + nextDate + '\');">Next <i class="fa fa-arrow-circle-right"></i></a>'
			div(style='clear: both;')
		if (pubDate)
			hr
			div#social-buttons
				div#tweet(class='share')
					iframe(allowtransparency='true',frameborder='0',scrolling='no',src='https://platform.twitter.com/widgets/tweet_button.html?url=http%3A%2F%2Fwww.amphibian.net%2F' + id + '&via=frogcomics',style='width:130px; height:20px;') 
				div#fb(class='share')
					iframe(src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.amphibian.net%2F" + id + "&width&layout=button_count&action=like&show_faces=false&share=true&height=21&appId=121560161486" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px;" allowTransparency="true")
			div#pubdatediv
				p.pubdate= 'Published ' + pubDate
			div(style='clear: both;')